<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">


</head>
<body>

    <div class="container-fluid layout">
        <div class="row h-100 d-flex">
            <div class="col-12 col-md-2 layout__sidebar">
                <!-- Logo -->
                <div class="row mb-4">
                    <img src="asset/logo.png" alt="Logo" class="img-fluid sidebar__logo">
                </div>
            
                <!-- Recommend Section -->
                <section class="mb-4">
                    <p class="section-title mb-1">Recommend</p>
                    <ul class="list-unstyled ps-3">
                        <li>
                            <div class="list-item-box">
                                <a href="#" class="text-decoration-none text-dark">For you</a>
                            </div>
                        </li>
                    </ul>
                </section>
            
                <!-- My Music Section -->
                <section class="mb-4">
                    <p class="section-title mb-1">My Music</p>
                    <ul class="list-unstyled ps-3">
                        <li>
                            <div class="list-item-box">
                                <a href="#" class="text-decoration-none text-dark">Liked Music</a>
                            </div>
                        </li>
                        <li>
                            <div class="list-item-box">
                                <a href="#" class="text-decoration-none text-dark">Albums</a>
                            </div>
                        </li>
                    </ul>
                </section>
            
                <!-- Playlist Section -->
                <section>
                    <div class="d-flex align-items-center justify-content-between pe-3">
                        <p class="section-title mb-1">Playlists</p>
                        <img class="add__playlist" src="asset/add.png" alt="Add" style="width: 20px; cursor: pointer;">
                    </div>
                    <ul class="list-unstyled ps-3">
                        <li>
                            <div class="list-item-box">
                                <a href="#" class="text-decoration-none text-dark d-block">
                                    <div class="playlist__text">
                                        <p class="playlist__name mb-0">Work</p>
                                        <p class="playlist__creator text-muted mb-0">Made By ABC</p>
                                    </div>
                                </a>
                            </div>
                        </li>
                    </ul>
                </section>
            </div>
            
            
            
            <div class="col-12 col-md-8 layout__main">
            <!-- Main content -->
            <header class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3 w-100">
                <!-- Search -->
                <div class="search-container position-relative">
                    <input type="text" class="form-control search-input ps-5" placeholder="Search">
                    <img src="asset/search.png" class="search-icon position-absolute top-50 start-0 translate-middle-y ms-3" alt="Search icon">
                </div>

                <!-- User Section -->
                <div class="d-flex align-items-center gap-3">
                    <img src="asset/notification.png" alt="Notifications" class="user__notifications">
                    <img src="asset/user.png" alt="User" class="user__img rounded-circle">
                    <p class="mb-0 fw-semibold">Hello, ABC</p>
                </div>
            </header>

                
                <div class="main-scroll">
                    <!-- Trending Section -->
                    <section class="section trend-section mb-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h2 class="section-title">Trending</h2>
                            <button class="btn btn-link p-0">Show all</button>
                        </div>
                        <!-- Inside your trending section -->
                        <div class="media-scroll d-flex gap-3">
                            <!-- Song 1 -->
                            <div class="media-card text-center" data-song="Stay Here" data-artist="Joker Xue" data-file="music/Stay Here.m4a">
                                <div class="media-img rounded">
                                    <img src="asset/cover.jpg" alt="Trending Cover" class="img-fluid object-fit-cover">
                                    <div class="play-overlay">
                                        <img src="asset/play.png" alt="Play" class="play-icon">
                                    </div>
                                </div>
                                <p class="media-title mb-0 mt-2">Stay Here</p>
                                <p class="media-subtitle text-muted mb-0">Joker Xue</p>
                            </div>
                            
                            <!-- Song 2 -->
                            <div class="media-card text-center" data-song="小孩" data-artist="Joker Xue" data-file="music/小孩.m4a">
                                <div class="media-img rounded">
                                    <img src="asset/cover.jpg" alt="Trending Cover" class="img-fluid object-fit-cover">
                                    <div class="play-overlay">
                                        <img src="asset/play.png" alt="Play" class="play-icon">
                                    </div>
                                </div>
                                <p class="media-title mb-0 mt-2">小孩</p>
                                <p class="media-subtitle text-muted mb-0">Joker Xue</p>
                            </div>
                            
                            <!-- Song 3 -->
                            <div class="media-card text-center" data-song="绅士" data-artist="Joker Xue" data-file="music/绅士.m4a">
                                <div class="media-img rounded">
                                    <img src="asset/cover.jpg" alt="Trending Cover" class="img-fluid object-fit-cover">
                                    <div class="play-overlay">
                                        <img src="asset/play.png" alt="Play" class="play-icon">
                                    </div>
                                </div>
                                <p class="media-title mb-0 mt-2">绅士</p>
                                <p class="media-subtitle text-muted mb-0">Joker Xue</p>
                            </div>
                        </div>
                    </section>

                    <!-- Artist Section -->
                    <section class="section artist-section mb-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h2 class="section-title">Artists</h2>
                            <button class="btn btn-link p-0">Show all</button>
                        </div>
                        <div class="media-scroll d-flex gap-3">
                            <!-- Repeat 10 times -->
                            <div class="media-card text-center">
                                <div class="media-img rounded-circle">
                                    <img src="asset/artist.png" alt="Artist" class="img-fluid object-fit-cover">
                                </div>
                                <p class="media-title mb-0 mt-2">Artist Name</p>
                                <p class="media-subtitle text-muted mb-0">Artist</p>
                            </div>
                            <div class="media-card text-center">
                                <div class="media-img rounded-circle">
                                    <img src="asset/artist.png" alt="Artist" class="img-fluid object-fit-cover">
                                </div>
                                <p class="media-title mb-0 mt-2">Artist Name</p>
                                <p class="media-subtitle text-muted mb-0">Artist</p>
                            </div>
                            
                            
                            <!-- x10 -->
                        </div>
                    </section>

                    <!-- Album Section -->
                    <section class="section album-section mb-4">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h2 class="section-title">Albums</h2>
                            <button class="btn btn-link p-0">Show all</button>
                        </div>
                        <div class="media-scroll d-flex gap-3">
                            <!-- Repeat 10 times -->
                            <div class="media-card text-center">
                                <div class="media-img rounded">
                                    <img src="asset/album.png" alt="Album" class="img-fluid object-fit-cover">
                                </div>
                                <p class="media-title mb-0 mt-2">Album Title</p>
                                <p class="media-subtitle text-muted mb-0">Artist</p>
                            </div>
                            <div class="media-card text-center">
                                <div class="media-img rounded">
                                    <img src="asset/album.png" alt="Album" class="img-fluid object-fit-cover">
                                </div>
                                <p class="media-title mb-0 mt-2">Album Title</p>
                                <p class="media-subtitle text-muted mb-0">Artist</p>
                            </div>
                            
                            
                            <!-- x10 -->
                        </div>
                    </section>
                </div>



                
            </div>
            <div class="col-12 col-md-2 layout__sidebar">
                <div class="row">
                    <h3 class="section-title">Friend Activity</h3>
                </div>
                <div class="row">
                    <div class="friends__box d-flex align-items-center">
                        <div class="friends__img me-2">
                            <img src="asset/friends.png" alt="Friends" class="img-fluid object-fit-cover">
                        </div>
                        <div class="friends__text flex-grow-1">
                            <p class="friends__name mb-0">Misellin</p>
                            <p class="friends__activity text-muted mb-0">Listening to SNH48</p>
                        </div>
                        <div class="friends__play ms-2">
                            <img src="asset/play.png" alt="Play" class="img-fluid object-fit-cover">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="friends__box d-flex align-items-center">
                        <div class="friends__img me-2">
                            <img src="asset/friends.png" alt="Friends" class="img-fluid object-fit-cover">
                        </div>
                        <div class="friends__text flex-grow-1">
                            <p class="friends__name mb-0">Felicia</p>
                            <p class="friends__activity text-muted mb-0">Listening 2 hours ago</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="friends__box d-flex align-items-center">
                        <div class="friends__img me-2">
                            <img src="asset/friends.png" alt="Friends" class="img-fluid object-fit-cover">
                        </div>
                        <div class="friends__text flex-grow-1">
                            <p class="friends__name mb-0">Jonathan</p>
                            <p class="friends__activity text-muted mb-0">Online</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="friends__box d-flex align-items-center">
                        <div class="friends__img me-2">
                            <img src="asset/friends.png" alt="Friends" class="img-fluid object-fit-cover">
                        </div>
                        <div class="friends__text flex-grow-1">
                            <p class="friends__name mb-0">Dave</p>
                            <p class="friends__activity text-muted mb-0">Listening 1 week ago</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-md-12 music__player">
                <div class="floating-player">
                    <!-- Progress Bar - Hide when no song is playing -->
                    <div class="progress-bar-container" style="display: none;">
                        <progress class="progress-bar" value="0" max="100"></progress>
                    </div>
                    
                    <div class="player-content">
                        <div class="player-info">
                            <!-- Default state with no cover -->
                            <div class="song-cover no-song">
                                <img src="asset/no-cover.png" alt="No song selected" class="img-fluid">
                            </div>
                            <div class="song-details">
                                <p class="song-title">No song selected</p>
                                <p class="song-artist">Select a song to play</p>
                            </div>
                        </div>
                        
                        <div class="player-controls">
                            <!-- Disabled buttons when no song -->
                            <button class="control-btn prev-btn" disabled>
                                <img src="asset/prev.png" alt="Prev" class="control-icon">
                            </button>
                            <button class="control-btn play-btn" disabled>
                                <img src="asset/start.png" alt="Start" class="control-icon">
                            </button>
                            <button class="control-btn next-btn" disabled>
                                <img src="asset/next.png" alt="Next" class="control-icon">
                            </button>
                        </div>
                        
                        <div class="player-controls">
                            <!-- Volume controls can remain active -->
                            <div class="volume-control-container">
                                <button class="control-btn volume-btn">
                                    <img src="asset/volume.png" alt="Volume" class="control-icon">
                                </button>
                                <div class="volume-slider-wrapper">
                                    <input type="range" class="volume-slider" min="0" max="1" step="0.01" value="0.7" orient="vertical">
                                </div>
                            </div>
                            <button class="control-btn" disabled>
                                <img src="asset/shuffle.png" alt="Shuffle" class="control-icon">
                            </button>
                            <button class="control-btn" disabled>
                                <img src="asset/repeat.png" alt="Repeat" class="control-icon">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            
            

        </div>
        <footer></footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const audioElement = new Audio();
            const progressBar = document.querySelector('.progress-bar');
            const songTitleElement = document.querySelector('.song-title');
            const songArtistElement = document.querySelector('.song-artist');
            const songCoverElement = document.querySelector('.song-cover');
            const playButton = document.querySelector('.play-btn');
            const playIcon = playButton.querySelector('img');
            
            // Initialize progress bar at 0
            progressBar.value = 0;
            
            // Current song information
            let currentSong = null;
            
            // Play/Pause Button
            playButton.addEventListener('click', function() {
                togglePlayPause();
            });
            
            // Function to toggle play/pause
            function togglePlayPause() {
                if (audioElement.paused) {
                    if (!currentSong) {
                        // If no song is selected, play the first one
                        const firstSongCard = document.querySelector('.media-card');
                        if (firstSongCard) {
                            playSongFromCard(firstSongCard);
                        }
                        return;
                    }
                    audioElement.play();
                    playIcon.src = 'asset/pause.png';
                    playIcon.alt = 'Pause';
                } else {
                    audioElement.pause();
                    playIcon.src = 'asset/start.png';
                    playIcon.alt = 'Start';
                }
            }
            
            // Function to play song from card
            function playSongFromCard(card) {
                const songFile = card.getAttribute('data-file');
                const songName = card.getAttribute('data-song');
                const artistName = card.getAttribute('data-artist');
                const coverImage = card.getAttribute('data-cover') || card.querySelector('.media-img img').src;
                
                currentSong = {
                    file: songFile,
                    name: songName,
                    artist: artistName,
                    cover: coverImage
                };
                
                // Show progress bar
                document.querySelector('.progress-bar-container').style.display = 'block';
                
                // Update player UI
                const songCoverElement = document.querySelector('.song-cover');
                songCoverElement.innerHTML = `<img src="${coverImage}" alt="${songName}" class="img-fluid">`;
                songCoverElement.classList.remove('no-song');
                
                document.querySelector('.song-title').textContent = songName;
                document.querySelector('.song-artist').textContent = artistName;
                
                // Enable buttons
                document.querySelectorAll('.player-controls button').forEach(btn => {
                    btn.disabled = false;
                });
                
                audioElement.src = songFile;
                audioElement.play();
                updatePlayButton(true);
            }
            
            function updatePlayButton(isPlaying) {
                const playIcon = document.querySelector('.play-btn img');
                playIcon.src = isPlaying ? 'asset/pause.png' : 'asset/start.png';
                playIcon.alt = isPlaying ? 'Pause' : 'Play';
            }

            // When no song is playing
            function resetPlayerToDefault() {
                document.querySelector('.progress-bar-container').style.display = 'none';
                document.querySelector('.progress-bar').value = 0;
                
                const songCoverElement = document.querySelector('.song-cover');
                songCoverElement.innerHTML = '<img src="asset/no-cover.png" alt="No song selected" class="img-fluid">';
                songCoverElement.classList.add('no-song');
                
                document.querySelector('.song-title').textContent = 'No song selected';
                document.querySelector('.song-artist').textContent = 'Select a song to play';
                
                // Disable buttons
                document.querySelectorAll('.player-controls button').forEach(btn => {
                    if (!btn.classList.contains('volume-btn')) {
                        btn.disabled = true;
                    }
                });
                
                updatePlayButton(false);
                currentSong = null;
            }

            // Initialize with default state
            resetPlayerToDefault();

            // Handle song end
            audioElement.addEventListener('ended', function() {
                updatePlayButton(false);
            });

            // Add click event to all song cards
            document.querySelectorAll('.media-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // Check if click was on the play overlay or its children
                    const playOverlay = this.querySelector('.play-overlay');
                    if (playOverlay && playOverlay.contains(e.target)) {
                        playSongFromCard(this);
                    }
                });
            });
            
            // Update progress bar as music plays
            audioElement.addEventListener('timeupdate', function() {
                const currentTime = audioElement.currentTime;
                const duration = audioElement.duration;
                
                if (duration) {
                    const progress = (currentTime / duration) * 100;
                    progressBar.value = progress;
                }
            });
            
            // Allow seeking by clicking on progress bar
            progressBar.addEventListener('input', function() {
                const seekTime = (audioElement.duration * this.value) / 100;
                audioElement.currentTime = seekTime;
            });
            
            // Make progress bar clickable
            progressBar.addEventListener('click', function(e) {
                const percent = e.offsetX / this.offsetWidth;
                progressBar.value = percent * 100;
                audioElement.currentTime = audioElement.duration * percent;
            });
            
            // Volume Control (keep your existing volume control code)
            const volumeBtn = document.querySelector('.volume-btn');
            const volumeIcon = volumeBtn.querySelector('img');
            const volumeSlider = document.querySelector('.volume-slider');
            let lastVolume = 0.7;
            
            audioElement.volume = volumeSlider.value;
            updateVolumeIcon();
            
            volumeSlider.addEventListener('input', function() {
                if (!audioElement.muted) {
                    audioElement.volume = this.value;
                    lastVolume = this.value;
                }
                updateVolumeIcon();
            });
            
            volumeBtn.addEventListener('click', function() {
                if (audioElement.muted) {
                    audioElement.muted = false;
                    audioElement.volume = lastVolume;
                    volumeSlider.value = lastVolume;
                } else {
                    lastVolume = audioElement.volume;
                    audioElement.muted = true;
                    volumeSlider.value = 0;
                }
                updateVolumeIcon();
            });
            
            function updateVolumeIcon() {
                volumeIcon.src = audioElement.muted || audioElement.volume === 0 
                    ? 'asset/volume-off.png' 
                    : 'asset/volume.png';
                volumeIcon.alt = audioElement.muted ? 'Muted' : 'Volume';
            }
            
            audioElement.addEventListener('volumechange', function() {
                if (!audioElement.muted) {
                    volumeSlider.value = audioElement.volume;
                }
                updateVolumeIcon();
            });
            
            // Handle song end
            audioElement.addEventListener('ended', function() {
                playIcon.src = 'asset/start.png';
                playIcon.alt = 'Start';
                // You could add auto-play next song functionality here
            });
            
            // Prev/Next buttons (basic implementation)
            document.querySelector('.prev-btn').addEventListener('click', function() {
                const currentCard = document.querySelector('.media-card.playing');
                if (currentCard) {
                    const prevCard = currentCard.previousElementSibling;
                    if (prevCard && prevCard.classList.contains('media-card')) {
                        playSongFromCard(prevCard);
                    }
                }
            });
            
            document.querySelector('.next-btn').addEventListener('click', function() {
                const currentCard = document.querySelector('.media-card.playing');
                if (currentCard) {
                    const nextCard = currentCard.nextElementSibling;
                    if (nextCard && nextCard.classList.contains('media-card')) {
                        playSongFromCard(nextCard);
                    }
                }
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
</body>
</html>